{% set post = get_post(post_id) %}
{% set headerBackgroundColor =  post.meta('header_background').slug %}
{% set blockBackgroundColor = block.backgroundColor|default('white') %}

{% embed '@partial/block_wrapper.twig' with {
  extra_classes: 'block_work-archive',
  extra_attributes: 'data-bs-theme="' ~ headerBackgroundColor ~ '"'
} %}
  {% block content %}
    <form
      action="{{ ajax_url }}"
      method="get"
      class="ajax-form-js hide-selected-labels"
    >
      <div data-bs-theme="green">
        {% include '@partial/archive-heading.twig' with { fields: fields, request: request } only %}
      </div>
      <div class="works-wrap" data-bs-theme="{{ blockBackgroundColor }}">
        <div class="container">
          {% include '@blocks/work-archive/filters.twig' with { fields: fields } %}
          <div class="ajax-results-js">
            {% include '@blocks/work-archive/results.twig' with {
              fields: fields,
              posts: posts,
              hide_featured: hide_featured
            } %}
          </div>
        </div>
      </div>
    </form>
  {% endblock %}
{% endembed %}
